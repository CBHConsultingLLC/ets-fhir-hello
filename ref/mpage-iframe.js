function MPageIFrame(){this.m_contentXHtml="",this.m_source="",this.m_namespace="",this.m_cssRules=[],this.m_cssSources=[]}MPageIFrame.prototype.setContent=function(a){if("string"!=typeof a)throw new Error("Called MPageIFrame.setContent with invalid paramater");this.m_contentXHtml=a},MPageIFrame.prototype.getContent=function(){return this.m_contentXHtml},MPageIFrame.prototype.setStaticContentPath=function(a){if("string"!=typeof a)throw new Error("Called MPageIFrame.setStaticContentPath with invalid paramater");this.m_staticContent=a},MPageIFrame.prototype.getStaticContentPath=function(){return this.m_staticContent},MPageIFrame.prototype.setSource=function(a){if("string"!=typeof a)throw new Error("Called MPageIFrame.setSource with invalid paramater");this.m_source=a},MPageIFrame.prototype.getSource=function(){return this.m_source},MPageIFrame.prototype.setNamespace=function(a){if("string"!=typeof a)throw new Error("Called MPageIFrame.setNamespace with invalid paramater");this.m_namespace=a},MPageIFrame.prototype.getNamespace=function(){return this.m_namespace},MPageIFrame.prototype.setFinalizeFn=function(a){if("function"!=typeof a)throw new Error("Called MPageIFrame.setFinalizeFn with invalid paramater");this.m_finalizeFn=a},MPageIFrame.prototype.addCssRule=function(a){if("string"!=typeof a)throw new Error("Called MPageIFrame.addCssRule with invalid paramater");this.m_cssRules.push(a)},MPageIFrame.prototype.addCssSource=function(a){if("string"!=typeof a)throw new Error("Called MPageIFrame.addCssSource with invalid paramater");this.m_cssSources.push(a)},MPageIFrame.prototype.render=function(){var a=this.getSource()||"about:blank";return"<iframe id='mpageIframe"+this.getNamespace()+"' src='"+a+"' scrolling='no' frameborder='0'></iframe>"},MPageIFrame.prototype.getRootElement=function(){return document.getElementById("mpageIframe"+this.getNamespace())},MPageIFrame.prototype.updateContent=function(){var a=this.getRootElement().contentWindow.document;a.open(),a.write("<!DOCTYPE HTML>"),a.write(this.getContent()),a.close()},MPageIFrame.prototype.resize=function(){var a=this.getRootElement(),b=a.contentWindow.document;a.style.width="";var c=$(b.body).outerHeight(!0)-$(b.body).outerHeight(),d=$(b.body).outerWidth(!0)-$(b.body).outerWidth();a.style.height=b.body.scrollHeight+c+"px";var e=b.body.scrollWidth+d;e>$(a).width()&&(a.style.width=e+"px")},MPageIFrame.prototype.updateCss=function(){var a=this.m_cssRules.length;if(a){for(var b=this.getRootElement().contentWindow.document,c=$(b).find("head"),d='<style type="text/css">',e=0;e<a;e++){var f=this.m_cssRules[e];d+=f}d+="</style>",$(c).append(d)}},MPageIFrame.prototype.finalize=function(){var a=this.getRootElement(),b=a.contentWindow.document;this.updateContent(),this.m_finalizeFn&&this.m_finalizeFn(b),this.addCssStyleSheets(),this.updateCss(),this.resize()},MPageIFrame.prototype.addBasePath=function(){var a=this.getRootElement(),b=a.contentWindow.document,c=this.getAbsoluteStaticContentPath(),d=$(b).find("head"),e='<base href="'+c+'"></base>';$(d).append(e)},MPageIFrame.prototype.getAbsoluteStaticContentPath=function(){var a=this.getRootElement(),b=this.getStaticContentPath(),c="";if(CERN_Platform.inMillenniumContext())c=b;else{var d=a.contentWindow.parent.document.location;c=d.origin+d.pathname+"/../"+b}return c},MPageIFrame.prototype.addCssStyleSheets=function(){for(var a=this,b=this.getRootElement(),c=this.getAbsoluteStaticContentPath(),d=this.m_cssSources,e=d.length,f=b.contentWindow.document,g=$(f).find("head"),h="",i=null,j=0;j<e;j++)h=c+"/css/iframe/"+d[j],function(b){i=$('<link rel="stylesheet" type="text/css" />'),$(g).append(i),i.load(function(){a.resize()}).attr("href",b)}(h)};